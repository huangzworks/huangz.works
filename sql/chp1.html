<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left: 0.25em solid rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    pre {
        page-break-inside: avoid;
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.mac-os #write{
    caret-color: AccentColor;
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



</style><title>01</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='第-1-章-设置编码环境'><span>第 1 章</span><span>	</span><span>设置编码环境</span></h1><p>&nbsp;</p><p><span>兵马未动，粮草先行。为了完成本书布置的练习，我们首先要做的就是获取资源并安装软件。本章将向你展示如何安装文本编辑器、如何下载示例代码和数据，还有如何安装PostgreSQL数据库系统及其配套的图形用户界面pgAdmin。本章还会告诉你如何在有需要的时候获取帮助。阅读完本章之后，你的计算机将拥有一个健壮的环境，足以让你学习如何使用SQL进行数据分析。</span></p><p><span>强烈建议你不要跳过本章。正如我的老学究高中老师以往说的那样：“三思而后行，防范于未然”。按照本章介绍的步骤行事可以有效地避免之后出现问题。</span></p><p><span>我们的首个任务就是设置一个适用于数据处理的文本编辑器。</span></p><p>&nbsp;</p><h2 id='安装文本编辑器'><span>安装文本编辑器</span></h2><p><span>我们将要载入到SQL数据库中的源数据，通常会以</span><em><span>逗号分隔值</span></em><span>（CSV）格式储存在</span><em><span>文本文件</span></em><span>里面，第5章中的“处理带有分隔符的文本文件”一节将对这种格式做更详细的介绍。目前来说，我们要做的就是找到一个文本编辑器，它能够打开CSV格式的文件并且不会无意中伤害到文件中的数据。</span></p><p><span>数据处理软件对于数据的格式通常会有非常严格的要求，而文字处理程序和电子表格程序这类常见的商业软件，往往会自作主张地把样式或是隐藏字符添加到文件里面，所以使用这些程序处理数据可能会引发问题。举个例子，如果你使用Microsoft Excel打开一个CSV文件，那么程序为了让数据变得更容易阅读，它将自动改变一些数据：比如说，它会把</span><code>3-09</code><span>这个条目代号看作是日期并将其格式化为</span><code>9-Mar</code><span>。因为文本编辑器只处理纯文本，并且它不会对纯文本执行包括格式化在内的任何修饰，所以程序员总是使用它们来编辑源码文件、数据和配置文件：在任何情况下，我们都希望文本仅仅被看作是文本，而不是其他别的东西。</span></p><p><span>任何文本编辑器都能够满足本书的要求，如果你已经有自己的心头好，那么请放心地继续使用它。但如果你还没有找到适合自己的文本编辑器，那么以下是一些我使用过并且推荐的产品。除非另有说明，否则这里提到的大部分编辑器都是免费的，并且都能够适用于macOS、Windows还有Linux。</span></p><ul><li><p><span>微软的Visual Code Studio：</span><a href='https://code.visualstudio.com/' target='_blank' class='url'>https://code.visualstudio.com/</a><span> </span></p></li><li><p><span>GitHub的Atom：</span><a href='https://atom.io/' target='_blank' class='url'>https://atom.io/</a><span> </span></p></li><li><p><span>Sublime HQ的Sublime Text（可以免费试用，但需要付费才能持续使用）：</span><a href='https://www.sublimetext.com/' target='_blank' class='url'>https://www.sublimetext.com/</a><span> </span></p></li><li><p><span>Don Ho开发的Notepad++ （只能在Windows上使用）: </span><a href='https://notepad-plus-plus.org/' target='_blank' class='url'>https://notepad-plus-plus.org/</a><span> （注意，这和Windows内置的Notepad.exe不是同一个应用程序）</span></p></li></ul><p><span>那些喜欢在命令行工作的进阶用户可能会希望使用以下这两个文本编辑器中的一个，它们默认安装在某些版本的macOS和Linux中。</span></p><ul><li><p><span>由Bram Moolenaar和开源社区共同开发的Vim：</span><a href='https://www.vim.org/' target='_blank' class='url'>https://www.vim.org/</a></p></li><li><p><span>由Chris Allegretta和开源社区共同开发的GNU nano：</span><a href='https://www.nano-editor.org/' target='_blank' class='url'>https://www.nano-editor.org/</a><span> </span></p></li></ul><p><span>如果你还没有使用过文本编辑器，那么请下载并安装一个，然后学习一下如何使用它来打开文件夹并处理文件。</span></p><p><span>在此之后，我们要做的就是获取本书使用的示例代码和数据。</span></p><p>&nbsp;</p><h2 id='从github下载代码和数据'><span>从GitHub下载代码和数据</span></h2><p><span>完成本书练习所需的全部代码和数据都可以通过下载获得。为此，你需要执行以下步骤：</span></p><ol start='' ><li><p><span>访问位于No Starch Press网站上的本书主页：</span><a href='https://nostarch.com/practical-sql-2nd-edition/' target='_blank' class='url'>https://nostarch.com/practical-sql-2nd-edition/</a></p></li><li><p><span>点击页面中的</span><strong><span>Download the code from GitHub</span></strong><span>以访问包含本书资源的GitHub仓库。</span></p></li><li><p><span>在GitHub的“Practical SQL 2nd Edition”页面上，有一个</span><strong><span>Code</span></strong><span>按钮。点击它，然后选择</span><strong><span>Download ZIP</span></strong><span>，这样就可以把ZIP格式的压缩文件保存到你的电脑里面。请把这些文件放在你触手可及的位置，比如“桌面”。（如果你是GitHub用户，你还可以克隆或者fork这个仓库）。</span></p></li><li><p><span>解压文件。之后你将会看到一个名为</span><em><span>practical-sql-2-main</span></em><span>的文件夹，其中包含本书将要用到的各种文件以及子文件夹。同样，你可以把这个文件夹放到你易于查找的位置。</span></p></li></ol><blockquote><p><span>注意</span></p><p><span>为了让我们接下来将要安装的PostgreSQL数据库能够读写</span><code>practical-sql-2-master</code><span>文件夹中的内容，Windows用户需要为其提供相应的权限。为了做到这一点，请先用鼠标右键点击该文件夹，接着点击</span><strong><span>属性</span></strong><span>，然后点击其中的</span><strong><span>安全</span></strong><span>选项卡。之后，点击</span><strong><span>编辑</span></strong><span>，然后点击</span><strong><span>添加</span></strong><span>，再然后在“对象名称”的框体中键入</span><strong><span>Everyone</span></strong><span>并点击</span><strong><span>确定</span></strong><span>。最后，在用户列表里面选中“Everyone”，并勾选“允许”一栏下面的所有可选框，然后点击</span><strong><span>应用</span></strong><span>和</span><strong><span>确定</span></strong><span>。</span></p></blockquote><p><span>在 </span><em><span>practical-sql-2-master</span></em><span>文件夹中，你会发现与本书每一章对应的</span><em><span>Chapter</span></em><span>_</span><span>XX子文件夹，其中的</span><em><span>XX</span></em><span>就是相应的章号。每个子文件夹都包含了某一章对应的代码示例，还有一个扩展名为</span><em><span>.sql</span></em><span>的</span><em><span>Chapter</span></em><span>_XX文件。这是SQL代码文件，你可以用文本编辑器或者本章后面将要安装的PostgreSQL管理工具将其打开。注意，为了节约空间，书中的某些代码示例会被截断，在这种情况下，你需要使用</span><code>.sql</code><span>文件中完整展示的代码才能完成练习。当你在代码示例中看到</span><code>--snip--</code><span>时，说明该示例已被截断。</span></p><p><span>现在，先决条件已经满足，是时候开始安装数据库软件了。</span></p><p>&nbsp;</p><h2 id='安装postgresql和pgadmin'><span>安装PostgreSQL和pgAdmin</span></h2><p><span>在这一节，我们将要安装PostgreSQL数据库系统及其配套的图形管理工具pgAdmin。你可以把pgAdmin看作是管理PostgreSQL的一个有用的可视化工作区：它的界面能够让你看见数据库对象、管理设置、导入和导出数据，还可以编写查询——也即是通过代码从数据库里面检索数据。</span></p><p><span>使用PostgreSQL的一个好处是开源社区已经为启动和运行PostgreSQL提供了非常棒的指南。以下各个小节大致描述了截至本文写作期间，在Windows、macOS和Linux上安装PostgreSQL的方法，但是随着软件或操作系统的新版本发布，相应的步骤可能会发生变化。请查阅每一节提到的文档还有包含本书资源的GitHub仓库，我会维护那里的文件以便更新和回答常见问题。</span></p><blockquote><p><span>注意</span></p><p><span>为了获取最新的安全补丁及新特性，我建议你为自己的操作系统安装最新版本的PostgreSQL。在本书中，我假设你使用的是 11.0或以上版本。</span></p></blockquote><h3 id='在windows安装'><span>在Windows安装</span></h3><p><span>我推荐Windows用户使用由EDB公司（也即是原来的EnterpriseDB公司）提供的安装程序，EDB是一家为PostgreSQL用户提供支持和服务的公司。通过EDB下载PostgreSQL软件包还会同时获得pgAdmin和Stack Builder，后者包含的一些工具我们不仅会在本书后面用到，可能还会对你的整个SQL生涯有所帮助。</span></p><p><span>为了获得安装包，我们需要访问</span><a href='https://www.postgresql.org/download/windows/' target='_blank' class='url'>https://www.postgresql.org/download/windows/</a><span>并点击“EDB”一节中的</span><strong><span>Download the installer</span></strong><span>链接，然后链接会把我们引导至EDB网站的下载页面。除非你正在使用的是安装了32位Windows的旧电脑，否则请选择64位Windows能够使用的最新版PostgreSQL。</span></p><blockquote><p><span>注意</span></p><p><span>本节接下来的内容覆盖的是Windows 10的安装步骤。如果你使用的是Windows 11，那么请查看包含本书资源的GitHub仓库，以便了解安装步骤之间的具体差异。</span></p></blockquote><p><span>在下载完安装包之后，请按照以下步骤安装PostgreSQL、pgAdmin以及其他组件。</span></p><ol start='' ><li><p><span>右键点击安装包，选择</span><strong><span>以管理员身份运行</span></strong><span>，并在系统提示是否允许应用对你的计算机进行修改时回答“是”。安装程序首先会执行一系列设置任务，然后呈现一个初始的欢迎屏幕。你可以通过点击进入下一步。</span></p></li><li><p><span>在选择安装目录的界面中使用默认目录。   </span></p></li><li><p><span>在选择组件的界面中，通过勾选方框选择安装PostgreSQL服务器、pgAdmin工具、Stack Builder和命令行工具。</span></p></li><li><p><span>选择储存数据的位置。如果选择默认，那么数据将被放置在PostgreSQL安装文件夹的</span><em><span>data</span></em><span>子文件夹中。</span></p></li><li><p><span>为默认的起始数据库的超级用户账号</span><code>postgres</code><span>设置一个密码。PostgreSQL在安全和权限方面做得非常好。</span></p></li><li><p><span>选择服务器将要监听的端口号。默认的端口号为</span><code>5432</code><span>，除非你有其他数据库或者应用程序在使用这个端口号，否则最好还是使用这个号码。如果默认的端口号已经被其他应用占用，那么你可以选择</span><code>5433</code><span>或者其他数字来代替。</span></p></li><li><p><span>选择你所在的地区，一般来说保持默认就可以了。之后点击摘要屏幕，开始安装，这可能需要几分钟才能完成。</span></p></li><li><p><span>安装完成之后，程序会询问你是否需要启动EnterpriseDB的Stack Builder以获取额外的软件包。请确保复选框已经被勾选，然后点击</span><strong><span>完成</span></strong><span>。</span></p></li><li><p><span>Stack Builder启动之后，请在下拉菜单中选择“安装PostgreSQL”并点击</span><strong><span>下一步</span></strong><span>。程序将开始下载一系列附加应用。</span></p></li><li><p><span>展开“空间扩展”的菜单，根据你所安装的PostgreSQL版本选择相应的PostGIS包。你可能会看到有多个不同版本的PostGIS包可选，如果是的话那么请选择最新版本。另外，展开</span><strong><span>插件、工具和实用程序</span></strong><span>的菜单并选择</span><strong><span>EDB语言包</span></strong><span>，以安装包括Python在内的编程语言支持。几次点击之后，安装程序就会开始下载所需的附加组件，请等待直至下载完成。</span></p></li><li><p><span>当安装所需的文件下载完毕之后，请点击</span><strong><span>下一步</span></strong><span>以安装语言和PostGIS组件。对于PostGIS ，你需要同意许可协议；之后一直点击直到出现组件选择界面。请确保“PostGIS”和“创建空间数据库”已经被选中，点击</span><strong><span>下一步</span></strong><span>，接受默认的安装位置，然后再次点击</span><strong><span>下一步</span></strong><span>。</span></p></li><li><p><span>根据提示输入数据库密码，然后按照提示继续安装PostGIS 。</span></p></li><li><p><span>在要求注册</span><code>PROJ_LIB</code><span>和</span><code>GDAL_DATA</code><span>环境变量时回答</span><strong><span>是</span></strong><span>。此外，在要求设置</span><code>POSTGIS_ENABLED_DRIVERS</code><span>和启用</span><code>POSTGIS_ENABLE_OUTDB_RASTERS</code><span>环境变量的提问出现时回答</span><strong><span>是</span></strong><span>。最后，点击“完成”按钮以完成安装并退出安装程序。根据版本的不同，你有可能会被提示需要重启电脑。</span></p></li></ol><p><span>安装完成之后，Windows的启动菜单应该会出现两个新的文件夹：一个是PostgreSQL的，而另一个则是PostGIS的。</span></p><p><span>接下来的一节将会介绍如何为可选的Python语言支持设置相应的环境变量。但是由于本书需要到第17章才会介绍如何在Python中使用PostgreSQL，因此如果你现在只想尽快开始学习如何实际操作PostgreSQL，那么可以直接跳到后面的“使用pgAdmin”一节，等之后有需要时再回来学习如何设置Python。</span></p><h4 id='配置python语言支持'><span>配置Python语言支持</span></h4><p><span>我们将在第17章学习如何在Python编程语言中使用PostgreSQL。在上一节，我们安装的EDB语言包已经提供了Python支持，但是为了将语言包文件的位置添加到Windows系统的环境变量里面，我们还需要执行以下步骤：</span></p><ol start='' ><li><p><span>点击Windows任务栏上的</span><strong><span>搜索</span></strong><span>图标，键入</span><strong><span>控制面板</span></strong><span>，然后通过点击</span><strong><span>控制面板</span></strong><span>的图标来打开Windows控制面板。</span></p></li><li><p><span>在控制面板应用的搜索框里面键入</span><strong><span>环境</span></strong><span>，接着在显示的搜索结果列表里面点击</span><strong><span>编辑系统环境变量</span></strong><span>，然后将出现一个系统属性对话框。</span></p></li><li><p><span>在系统属性对话框的“高级”选项卡里面，点击</span><strong><span>环境变量</span></strong><span>。新打开的对话框将包含两个部分：用户变量和系统变量。在系统变量部分，如果你没有看到</span><code>PATH</code><span>变量，那么请执行步骤a，创建一个新的变量；如果</span><code>PATH</code><span>变量已经存在，那么继续执行步骤b来修改它。</span></p><p><span>a. 如果你在系统变量部分没有看到</span><code>PATH</code><span>，那么请点击</span><strong><span>新建</span></strong><span>以打开“创建新系统变量”对话框，如图1-1所示。</span></p><p><img src="C:\Users\huang\Desktop\psql-figures\chp1\figure-1-1.png" referrerpolicy="no-referrer" alt="figure-1-1"><span>图1-1：在Windows 10中创建新的</span><code>PATH</code><span>环境变量</span></p><p><span>在变量名一栏，键入</span><code>PATH</code><span>。在变量值一栏，加入</span><code>C:\edb\languagepack\v2\Python-3.9</code><span>。（除了直接键入变量位置之外，你还可以点击</span><strong><span>浏览目录</span></strong><span>，然后在浏览文件夹对话框里面导航至该目录。）在你手动输入路径或者通过浏览导航至该目录之后，请点击</span><strong><span>确定</span></strong><span>来关闭对话框。</span></p><p><span>b. 如果</span><code>PATH</code><span>变量已经存在于系统变量部分，那么请高亮选中它并点击</span><strong><span>编辑</span></strong><span>，接着在展示的变量列表里面点击</span><strong><span>新建</span></strong><span>并键入</span><code>C:\edb\languagepack\v2\Python-3.9</code><span>。（跟前面一样，除了直接键入目录的位置之外，你还可以通过浏览目录并导航的方式确定目录的位置。）</span></p><p><span>在添加语言包的位置之后，请在变量列表里面高亮选中它，然后点击</span><strong><span>向上移动</span></strong><span>直至该路径到达变量列表的顶端。这样一来，即便你安装了其他版本的Python，PostgreSQL也能够找到正确的Python版本。</span>
<span>最后得到的结果应该会跟图1-2中的高亮行一样。请点击</span><strong><span>OK</span></strong><span>以关闭对话框。</span></p><p><img src="C:\Users\huang\Desktop\psql-figures\chp1\figure-1-2.png" referrerpolicy="no-referrer" alt="figure-1-2">
<span>图1-2：在Windows 10里面编辑已存在的</span><code>PATH</code><span>环境变量</span></p></li><li><p><span>最后，在系统变量部分，点击</span><strong><span>新建</span></strong><span>。接着在新建系统变量对话框的变量名称一栏，键入</span><code>PYTHONHOME</code><span>，并在变量值的一栏键入</span><code>C:\edb\languagepack\v2\Python-3.9</code><span>。完成之后，在所有对话框中点击</span><strong><span>确定</span></strong><span>以关闭它们。注意，这些Python路径将在下次重启系统之后开始生效。</span></p></li></ol><p><span>如果你在安装PostgreSQL的过程中遇到任何问题，那么请查看本书的在线资源，我会在那里指出不同版本的变化，并对其引发的问题进行解答。如果你无法通过Stack Builder安装PostGIS，那么请尝试从PostGIS的网站</span><a href='https://postgis.net/windows_downloads/' target='_blank' class='url'>https://postgis.net/windows_downloads/</a><span>下载独立的安装程序，并按照</span><a href='https://postgis.net/documentation/' target='_blank' class='url'>https://postgis.net/documentation/</a><span>的指示进行安装。</span></p><p><span>现在，请跳转到后面的“使用pgAdmin”一节继续阅读。</span></p><p>&nbsp;</p><h3 id='在macos安装'><span>在macOS安装</span></h3><p><span>我建议macOS用户使用Postgres.app，它是一个开源的macOS应用程序，包含了PostgreSQL和PostGIS扩展以及其他一些好东西。此外，为了调用上述应用，你还需要安装pgAdmin图形用户界面以及Python语言。</span></p><h4 id='安装postgresapp和pgadmin'><span>安装Postgres.app和pgAdmin</span></h4><p><span>执行以下步骤：</span></p><ol start='' ><li><p><span>访问</span><a href='https://postgresapp.com/' target='_blank' class='url'>https://postgresapp.com/</a><span>，下载最新版本的应用程序，它将是一个以</span><code>.dmg</code><span>结尾的磁盘镜像文件。</span></p></li><li><p><span>通过双击打开</span><code>.dmg</code><span>文件，然后将应用程序图标拖拽到你的</span><em><span>应用程序</span></em><span>文件夹里面。</span></p></li><li><p><span>在</span><em><span>应用程序</span></em><span>文件夹里面，双击应用图标以启动Postgres.app。（如果你看到一个对话框，显示由于无法验证开发者而导致无法打开该应用程序，那么请点击</span><strong><span>取消</span></strong><span>。然后右键单击应用图标并选择</span><strong><span>打开</span></strong><span>。）在Postgres.app打开之后，点击</span><strong><span>初始化</span></strong><span>以创建和启动PostgreSQL数据库服务器。</span></p></li></ol><p><span>之后你的菜单栏会出现一个小小的大象图标，表明有数据库正在运行。为了设置内置的PostgreSQL命令行工具以便在将来使用它们，你需要打开终端应用程序并在提示符之后运行以下这段代码（你可以在 Postgres.app的网站</span><a href='https://postgresapp.com/documentation/install.html' target='_blank' class='url'>https://postgresapp.com/documentation/install.html</a><span>找到并复制这行代码）：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> <span class="cm-builtin">mkdir</span> <span class="cm-attribute">-p</span> /etc/paths.d &amp;&amp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">echo</span> /Applications/Postgres.app/Contents/Versions/latest/bin | <span class="cm-builtin">sudo</span> <span class="cm-builtin">tee</span> /etc/</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">paths.d/postgresapp</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>执行这段代码时，系统可能会要求你输入登陆Mac时的密码，请按要求照做。上述命令在执行时应该不会产生任何输出。</span></p><p><span>接下来，因为Postgres.app不包含pgAdmin，所以请根据以下步骤安装pgAdmin：</span></p><ol start='' ><li><p><span>访问pgAdmin网站的macOS下载页面：</span><a href='https://www.pgadmin.org/download/pgadmin-4-macos/' target='_blank' class='url'>https://www.pgadmin.org/download/pgadmin-4-macos/</a><span>。</span></p></li><li><p><span>选择最新版本并下载安装程序（寻找以</span><em><span>.dmg</span></em><span>结尾的磁盘镜像文件）。</span></p></li><li><p><span>先双击</span><em><span>.dmg</span></em><span>文件，然后点击提示框以接受相应的条款，最后将pgAdmin的大象应用程序图标拖拽到你的</span><em><span>应用程序</span></em><span>文件夹里面。</span></p></li></ol><p><span>在macOS上进行安装相对来说是比较容易的，但如果你遇到任何问题，那么请查看Postgres.app的文档：</span><a href='https://postgresapp.com/documentation/' target='_blank' class='url'>https://postgresapp.com/documentation/</a><span>和pgAdmin的文档：</span><a href='https://www.pgadmin.org/docs/' target='_blank' class='url'>https://www.pgadmin.org/docs/</a><span>。</span></p><h4 id='安装python'><span>安装Python</span></h4><p><span>本书第17章将教你如何通过Python编程语言调用PostgreSQL。但如果你想要通过Python调用Postgres.app，那么就必须安装特定版本的Python，即便macOS已经预装了Python（并且你可能已经设置了额外的Python环境）。为了启用Postgres.app可选的Python语言支持，请执行以下步骤：</span></p><ol start='' ><li><p><span>访问Python官方网站</span><a href='https://www.python.org/' target='_blank' class='url'>https://www.python.org/</a><span>，点击下载菜单。</span></p></li><li><p><span>在释出版本的列表中，找到并下载Python 3.9的最新版本。请根据你的Mac所使用的处理器选择正确的安装程序——较旧的Mac使用的是英特尔芯片，而较新型号使用的则是Apple芯片。下载的文件应该是一个以</span><em><span>.pkg</span></em><span>结尾的Apple软件包文件。</span></p></li><li><p><span>双击软件包文件以安装Python，点击查看许可协议，并在安装完成之后关闭安装程序。</span></p></li></ol><p><span>Postgres.app对Python的要求可能会随着时间而改变，请访问Postgres.app的文档</span><a href='https://postgresapp.com/documentation/plpython.html' target='_blank' class='url'>https://postgresapp.com/documentation/plpython.html</a><span>以及本书的在线资源以了解最新情况。</span></p><p><span>现在，请跳转到后面的“使用pgAdmin”一节继续阅读。</span></p><p>&nbsp;</p><h3 id='在linux安装'><span>在Linux安装</span></h3><p><span>对于Linux用户来说，安装PostgreSQL可能会非常简单，也可能会非常困难，根据我的经验，Linux世界就是这样运作的。大多数情况下，安装工作都可以通过几条命令来完成，只是找到这些命令需要在互联网上进行一番侦察。幸运的是，包括Ubuntu、Debian和CentOS在内，大部分流行的Linux发行版都将PostgreSQL包含在它们的标准包里面。但是，由于有些发行版比其他发行版更注重更新，所以通过标准包安装的PostgreSQL有可能不是最新的。如果你的发行版并没有预装PostgreSQL，又或者你想要把PostgreSQL升级至更新的版本，那么最好还是查阅发行版的文档以了解安装PostgreSQL的最佳方法。</span></p><p><span>此外，PostgreSQL项目还为RedHat 变种、Debian和Ubuntu维护着一个完整的、最新版本的软件包库，具体的细节可以通过访问</span><a href='https://yum.postgresql.org/' target='_blank' class='url'>https://yum.postgresql.org/</a><span>和</span><a href='https://wiki.postgresql.org/wiki/Apt' target='_blank' class='url'>https://wiki.postgresql.org/wiki/Apt</a><span>获知。上述网站提供的包内置了PostgreSQL的客户端和服务器端、pgAdmin（如果可用的话）、PostGIS和PL/Python。根据用户使用的Linux发行版不同，这些包的具体名字也会有所不同，并且使用这些包的用户还需要手动启动PostgreSQL数据库服务器。</span></p><p><span>pgAdmin一般来说并不是Linux发行版的一部分。为此，我们需要访问pgAdmin的网站</span><a href='https://www.pgadmin.org/download/' target='_blank' class='url'>https://www.pgadmin.org/download/</a><span>，确认自己的平台是否被支持，并获得安装该应用所需的最新安装说明。如果你喜欢冒险的感觉，那么也可以在</span><a href='https://www.pgadmin.org/download/pgadmin-4-source-code/' target='_blank' class='url'>https://www.pgadmin.org/download/pgadmin-4-source-code/</a><span>找到如何从源代码构建应用程序的说明。在完成上述工作之后，请跳转到后面的“使用pgAdmin”一节继续阅读。</span></p><h4 id='ubuntu安装示例'><span>Ubuntu安装示例</span></h4><p><span>为了演示如何在Linux上安装PostgreSQL ，以下是在代号为Hirsute Hippo的Ubuntu 21.04上安装PostgreSQL 、pgAdmin 、PostGIS和PL/Python 的具体步骤。</span>
<span>这里用到的指令来自</span><a href='https://wiki.postgresql.org/wiki/Apt' target='_blank' class='url'>https://wiki.postgresql.org/wiki/Apt</a><span>和</span><a href='https://help.ubuntu.com/community/PostgreSQL/' target='_blank' class='url'>https://help.ubuntu.com/community/PostgreSQL/</a><span> 的“基本服务器设置”部分。</span>
<span>如果你使用的也是Ubuntu ，那么你可以按照这些步骤进行安装。</span></p><p><span>通过CTRL+ALT+T组合按键打开终端。接着，通过在提示符之后键入以下命令，为PostgreSQL APT资源库导入密钥：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> apt-get install <span class="cm-builtin">curl</span> ca-certificates gnupg</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">curl</span> https://www.postgresql.org/media/keys/ACCC4CF8.asc | <span class="cm-builtin">sudo</span> apt-key add <span class="cm-attribute">-</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>之后，通过运行以下命令，创建文件</span><em><span>/etc/apt/sources.list.d/pgdg.list</span></em><span> ：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> <span class="cm-builtin">sh</span> <span class="cm-attribute">-c</span> <span class="cm-string">'echo "deb https://apt.postgresql.org/pub/repos/apt $(lsb_release</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-attribute">-cs</span>)-pgdg main<span class="cm-string">" &gt; /etc/apt/sources.list.d/pgdg.list'</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>在此之后，通过执行以下两条命令，更新包列表并安装PostgreSQL和pgAdmin （此处安装的是PostgreSQL 13 ，你可以根据自己的情况选择可用的更新版本）：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> apt-get update</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> apt-get install postgresql-13</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>现在你应该已经启动了PostgreSQL 了。请在终端键入以下这命令，该命令会以默认的</span><code>postgres</code><span>用户身份登录服务器并连接</span><code>postgres</code><span>数据库，并使用</span><code>psql</code><span>交互式终端（第 18 章将对该终端做深入的介绍）：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> <span class="cm-attribute">-u</span> postgres psql postgres</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><code>psql</code><span>启动之后会显示版本信息以及</span><code>postgres=#</code><span>提示符。在提示符之后键入以下命令可以为用户设置一个密码：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">postgres</span><span class="cm-operator">=</span><span class="cm-comment"># \password postgres</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>此外，我还喜欢创建一个跟Ubuntu用户名同名的用户账号。为此，请在</span><code>postgres=#</code><span>提示符之后键入以下命令，并将其中的</span><code>anthony</code><span>替换成你自己的Ubuntu用户名：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">postgres</span><span class="cm-operator">=</span><span class="cm-comment"># CREATE USER anthony SUPERUSER;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>你可以通过在</span><code>psql</code><span>的提示符后面键入</span><code>\q</code><span>来退出它，之后你应该就能重新看到系统终端的提示符。</span></p><p><span>为了安装pgAdmin，我们首先需要导入资源库的密钥：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">curl</span> https://www.pgadmin.org/static/packages_pgadmin_org.pub | <span class="cm-builtin">sudo</span> apt-key add</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>之后，执行以下命令，创建文件</span><code>/etc/apt/sources.list.d/pgadmin4.list</code><span>并更新包列表：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> <span class="cm-builtin">sh</span> <span class="cm-attribute">-c</span> <span class="cm-string">'echo "deb https://ftp.postgresql.org/pub/pgadmin/pgadmin4/</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">apt/<span class="cm-quote">$(lsb_release -cs)</span> pgadmin4 main<span class="cm-string">" &gt; /etc/apt/sources.list.d/pgadmin4.list</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&amp;&amp; apt update<span class="cm-string">'</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>然后我们就可以安装pgAdmin 4了：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> apt-get install pgadmin4-desktop</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>最后，为了安装PostGIS和PL/Python扩展，我们需要在终端执行以下命令（别忘了把版本号替换成你的Python版本）：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> apt install postgresql-13-postgis-3</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> apt install postgresql-plpython3-13</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>你可以查阅Ubuntu和PostgreSQL的文档以获取最新的安装方法。安装过程中遇到的任何问题都可以求助搜索引擎，Linux相关的问题通常都可以通过这种手段解决。</span></p><p>&nbsp;</p><h2 id='使用pgadmin'><span>使用pgAdmin</span></h2><p><span>在配置工作的最后，让我们来熟悉一下pgAdmin这个监督和管理PostgreSQL的工具。尽管pgAdmin是免费软件，但它的性能一点也不容小觑：它不仅功能齐全，而且跟微软的SQL Server Management Studio等付费工具一样强大。通过pgAdmin提供的图形界面，用户可以对PostgreSQL的服务器及数据库的多个方面进行配置，并使用SQL查询工具编写、运行和保存查询语句——这也是本书接下来要做的。</span></p><h3 id='启动pgadmin并设置主密码'><span>启动pgAdmin并设置主密码</span></h3><p><span>如果你已经按照前面的步骤在操作系统上安装了pgAdmin，那么你应该可以通过以下方法来启动它。</span></p><ul><li><p><strong><span>Windows</span></strong><span>：进入“开始”菜单，在“PostgreSQL”文件夹里面找到你所安装的版本，点击它，然后选择</span><strong><span>pgAdmin4</span></strong><span>。</span></p></li><li><p><strong><span>macOS</span></strong><span>：点击</span><em><span>应用程序</span></em><span>文件夹中的</span><strong><span>pgAdmin</span></strong><span>图标，请确保你已经启动了Postgres.app。</span></p></li><li><p><strong><span>Linux</span></strong><span>：启动方法可能会根据Linux发行版的不同而不同。一般来说，在终端提示符里面输入</span><code>pgadmin4</code><span>然后按下回车键应该就可以了。在Ubuntu中，pgAdmin会作为应用程序出现在活动概览里面。</span></p></li></ul><p><span>在pgAdmin的启动画面出现之后，应用程序就会被打开，如图1-3所示。如果这是你第一次启动pgAdmin，那么它还会弹出一个提示，要求你设置一个主密码。这个密码跟你在安装PostgreSQL时设置的密码并无关系。请设置一个主密码，然后点击“确定”。</span></p><p><img src="C:\Users\huang\Desktop\psql-figures\chp1\1-3.png" referrerpolicy="no-referrer" alt="1-3">
<span>图1-3： 在Windows 10上运行的pgAdmin应用</span></p><blockquote><p><span>注意</span></p><p><span>在macOS上，当你第一次启动pgAdmin时，系统可能会弹出一个对话框，显示“pgAdmin4无法打开，因为它来自一个身份不明的开发者”。在这种情况下，请通过右键单击图标然后点击</span><strong><span>打开</span></strong><span>。接下来弹出的对话框会提供选项让你能够打开该应用，请选择它，之后你的Mac就会记住你已经授予了该权限。</span></p></blockquote><p><span>pgAdmin的布局包括一个位于左侧的垂直面板，用于显示对象浏览器，你可以在这里看到可用的服务器、数据库、用户以及其他对象。横跨屏幕上方的是一系列菜单项，而位于菜单栏下面的则是多个标签，这些标签用于展示数据库对象以及性能的不同方面。下面让我们开始连接数据库。</span></p><h3 id='连接默认的postgres数据库'><span>连接默认的postgres数据库</span></h3><p><span>PostgreSQL是一个</span><em><span>数据库管理系统</span></em><span>，这意味着它是一个允许你定义、管理和查询数据库的软件。当你安装PostgreSQL的时候，它将创建一个</span><em><span>数据库服务器</span></em><span>，也即是一个在你电脑之上运行的应用程序实例，该实例还包含了一个名为</span><code>postgres</code><span>的默认数据库。数据库由一系列对象组成，其中包括表、函数还有其他很多东西，并且数据库也是实际储存数据的地方。我们通过SQL语言和pgAdmin来管理储存在数据库里面的对象和数据。</span></p><p><span>在接下来的一章，我们将通过在PostgreSQL服务器里面创建自己的数据库来组织自己的工作。但是现在，我们需要先通过连接默认的</span><code>postgres</code><span>数据库来探索 pgAdmin 。做到这一点需要执行以下步骤：</span></p><ol start='' ><li><p><span>在对象浏览器里面，点击服务器节点左边的向下箭头以展示默认服务器。根据你使用的操作系统，默认服务器的名字可能会是</span><em><span>localhost</span></em><span>或者</span><em><span>PostgreSQL x</span></em><span>，其中</span><em><span>x</span></em><span>为Postgres的版本号。</span></p></li><li><p><span>双击服务器名称。如果有提示，就输入你在安装时设置的数据库密码（你还可以通过保存密码来避免将来的重复输入）。pgAdmin在建立连接的过程中会显示一条简短的消息。在连接成功之后，服务器名字下面应该会出现几个新的对象元素。</span></p></li><li><p><span>先展开数据库分支，然后再展开默认的</span><code>postgres</code><span>数据库。</span></p></li><li><p><span>在</span><code>postgres</code><span>分支的下面展开Schemas对象，然后再展开public分支。</span></p></li></ol><p><span>你的对象浏览器面板看上去应该跟图 1-4 差不多。</span></p><p><img src="C:\Users\huang\Desktop\psql-figures\chp1\1-4.png" referrerpolicy="no-referrer" alt="1-4">
<span>图1-4：pgAdmin的对象浏览器</span></p><blockquote><p><span>注意</span></p><p><span>如果pgAdmin没有在服务器一栏显示默认的服务器，那么你需要手动添加它。请用右键单击服务器，然后点击</span><strong><span>创建 ▸ 服务器</span></strong><span>。接着在对话框的常规选项卡里面，为你的服务器键入一个名字，并在连接选项卡的“主机名称/地址”框里面键入</span><em><strong><span>localhost</span></strong></em><span> 。之后，填写你在安装PostgreSQL时设置的用户名和密码，然后点击</span><strong><span>保存</span></strong><span>。执行上述步骤之后，你应该就能看到被列出的默认服务器了。</span></p></blockquote><p><span>这一系列对象定义了数据库服务器的每一个特性。其中包括表，也即是储存数据的地方。通过在pgAdmin里面访问表，你可以查看表的结构，又或者对表执行操作。我们将在第2章使用这个浏览器来创建一个新的数据库，并保持默认的</span><code>postgres</code><span>不变。</span></p><h3 id='探索查询工具'><span>探索查询工具</span></h3><p><span>pgAdmin应用包含一个查询工具，它可以让你在上面编写和执行代码。为了打开查询工具，你需要在pgAdmin的对象浏览器里面，通过在任意数据库中点击它一次来高亮显示它。比如说，点击</span><code>postgres</code><span>数据库，然后选择</span><strong><span>工具 ▸ 查询工具</span></strong><span>。然后你会看到三个面板：一个查询编辑器，一个用于在工作时保存代码片段的便笺本，还有一个显示查询结果的数据输出方框。你可以打开多个选项卡，从而连接不同的数据库并为它们编写查询，又或者以自己想要的方式组织代码。为了打开另一个标签，你可以在对象浏览器里面点击某个数据库，然后通过菜单再次打开查询工具。</span></p><p><span>代码清单1-1中的语句能够返回你所安装的PostgreSQL版本，我们可以运行这个简单的查询并查看它的输出。这段代码以及书中展示的所有示例都可以通过位于</span><a href='https://nostarch.com/practical-sql-2nd-edition/' target='_blank' class='url'>https://nostarch.com/practical-sql-2nd-edition/</a><span>的在线资源来获取，只要点击页面上的</span><strong><span>Download the code from GitHub</span></strong><span>链接就可以了。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51693px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> version<span class="cm-bracket">()</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>代码清单1-1 ：查看你的PostgreSQL版本</span></p><p><span>你可以亲自把代码键入到查询编辑器里面，又或者从GitHub下载本书的代码之后，点击pgAdmin工具栏上的</span><strong><span>打开文件</span></strong><span>图标，导航至保存代码的文件夹，然后打开</span><em><span>Chapter_01</span></em><span>文件夹中的</span><em><span>Chapter_01.sql</span></em><span>文件。为了执行语句，你需要高亮选中以</span><code>SELECT</code><span>开头的代码行，然后点击工具栏上的</span><strong><span>执行/刷新</span></strong><span>图标（它的形状有点像播放按钮）。之后PostgreSQL应该会在pdAdmin的数据输出方框里面返回服务器的版本，如图1-5所示（你可能需要在数据输出方框里面通过点击右边缘并向右拖动来扩展列宽，从而看到全部结果）。</span></p><p><img src="C:\Users\huang\Desktop\psql-figures\chp1\1-5.png" referrerpolicy="no-referrer" alt="1-5">
<span>图 1-5 ：pgAdmin的查询工具显示查询结果</span></p><p><span>本书将在之后介绍更多查询相关的知识，但是现在来说，你只需要知道这个查询使用了PostgreSQL特有的</span><code>version()</code><span>函数来检索服务器的版本信息即可。在图片展示的例子中，输出显示我正在使用PostgreSQL 13.3，此外它还显示了一些与构建PostgreSQL有关的额外信息。</span></p><blockquote><p><span>注意</span></p><p><span>你从GitHub上下载的绝大部分示例代码文件都包含不止一个查询。如果你想要每次只执行一个查询，那么就需要先高亮选中相应的查询代码，然后再点击执行/刷新按钮。</span></p></blockquote><h3 id='自定义-pgadmin'><span>自定义 pgAdmin</span></h3><p><span>从pgAdmin菜单中选择</span><strong><span>文件 ▸ 首选项</span></strong><span>可以打开一个对话框，你可以在里面定义pgAdmin的外观和选项。这里有三个你可能感兴趣的地方：</span></p><ul><li><p><strong><span>杂项 ▸ 主题</span></strong><span>允许你在标准的浅色pgAdmin主题和深色主题中进行选择。</span></p></li><li><p><strong><span>查询工具 ▸ 结果网格</span></strong><span>允许你为查询结果设置一个最大列宽。请在该对话框中选择</span><strong><span>列数据</span></strong><span>，然后将</span><strong><span>最大列宽</span></strong><span>的值设置为</span><strong><span>300</span></strong><span>。</span></p></li><li><p><strong><span>浏览器</span></strong><span>部分允许你配置pgAdmin的样式并设置键盘快捷键。</span></p></li></ul><p><span>要获得关于pgAdmin选项的更多信息，请从菜单中选择</span><strong><span>帮助 ▸ 在线帮助</span></strong><span>。在继续我们的冒险之前，你可以随意地探索这些首选项。</span></p><p>&nbsp;</p><h2 id='pgadmin之外的选择'><span>pgAdmin之外的选择</span></h2><p><span>虽然pgAdmin非常适合新手，但它对于完成本书的练习来说并不是必须的。因此，如果你喜欢另一个能够跟PostgreSQL一起工作的管理工具，那么尽管使用它好了。此外，如果你想使用操作系统的命令行来完成本书的所有练习，那么第18章提供了通过命令行使用PostgreSQL交互式终端</span><code>psql</code><span>的操作说明。本书的附录里面还列举了一些可供探索的PostgreSQL资源，你可以在里面找到其他管理工具。</span></p><p>&nbsp;</p><h2 id='小结'><span>小结</span></h2><p><span>现在，你已经通过文本编辑器、PostgreSQL和pgAdmin建立起了编码环境，是时候开始学习SQL并使用它从数据中发掘有价值的洞见了！</span></p><p><span>在接下来的第2章，我们将要学习如何创建数据库和表，还有如何载入数据并探索其中的内容。事不宜迟，让我们马上开始吧！</span></p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</body>
</html>
